
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Installation &mdash; django-email-auth v1.0 documentation</title>
    <link rel="stylesheet" href="static/default.css" type="text/css" />
    <link rel="stylesheet" href="static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="static/jquery.js"></script>
    <script type="text/javascript" src="static/underscore.js"></script>
    <script type="text/javascript" src="static/doctools.js"></script>
    <link rel="top" title="django-email-auth v1.0 documentation" href="index.html" />
    <link rel="next" title="Settings" href="settings.html" />
    <link rel="prev" title="Obtaining the code" href="obtain.html" />
 
<script type="text/javascript" src="templatebuiltins.js"></script>
<script type="text/javascript">
(function($) {
    if (!django_template_builtins) {
       // templatebuiltins.js missing, do nothing.
       return;
    }
    $(document).ready(function() {
        // Hyperlink Django template tags and filters
        var base = "ref/templates/builtins.html";
        if (base == "#") {
            // Special case for builtins.html itself
            base = "";
        }
        // Tags are keywords, class '.k'
        $("div.highlight\\-html\\+django span.k").each(function(i, elem) {
             var tagname = $(elem).text();
             if ($.inArray(tagname, django_template_builtins.ttags) != -1) {
                 var fragment = tagname.replace(/_/, '-');
                 $(elem).html("<a href='" + base + "#" + fragment + "'>" + tagname + "</a>");
             }
        });
        // Filters are functions, class '.nf'
        $("div.highlight\\-html\\+django span.nf").each(function(i, elem) {
             var filtername = $(elem).text();
             if ($.inArray(filtername, django_template_builtins.tfilters) != -1) {
                 var fragment = filtername.replace(/_/, '-');
                 $(elem).html("<a href='" + base + "#" + fragment + "'>" + filtername + "</a>");
             }
        });
    });
})(jQuery);
</script>

  </head>
  <body>

    <div class="document">
  <div id="custom-doc" class="yui-t6">
    <div id="hd">
      <h1><a href="index.html">django-email-auth v1.0 documentation</a></h1>
      <div id="global-nav">
        <a title="Home page" href="index.html">Home</a>  |
        <a title="Table of contents" href="contents.html">Table of contents</a>  |
        <a title="Global index" href="genindex.html">Index</a>  |
        <a title="Module index" href="py-modindex.html">Modules</a>
      </div>
      <div class="nav">
    &laquo; <a href="obtain.html" title="Obtaining the code">previous</a> 
     |
    <a title="django-email-auth v1.0 documentation" href="index.html" accesskey="U">up</a>
   |
    <a href="settings.html" title="Settings">next</a> &raquo;</div>
    </div>
    
    <div id="bd">
      <div id="yui-main">
        <div class="yui-b">
          <div class="yui-g" id="install">
            
  <div class="section" id="installation">
<h1>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h1>
<div class="section" id="basic-installation">
<h2>Basic installation<a class="headerlink" href="#basic-installation" title="Permalink to this headline">¶</a></h2>
<ol class="arabic">
<li><p class="first">Copy the <tt class="docutils literal"><span class="pre">email_auth</span></tt> folder to your project.</p>
</li>
<li><p class="first">Add <a class="reference internal" href="backends.html#email_auth.backends.EmailBackend" title="email_auth.backends.EmailBackend"><tt class="xref py py-class docutils literal"><span class="pre">email_auth.backends.EmailBackend</span></tt></a> to the
<tt class="xref std std-setting docutils literal"><span class="pre">AUTHENTICATION_BACKENDS</span></tt> list in your settings. Note that Django
tries the backends in the order specified in the settings. So if you want to
try the email backend and fall back to the default (username) backend, you
would specify the backends as:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">AUTHENTICATION_BACKENDS</span> <span class="o">=</span> <span class="p">(</span>
    <span class="s">&#39;email.auth.backends.EmailBackend&#39;</span><span class="p">,</span>
    <span class="s">&#39;django.contrib.auth.backends.ModelBackend&#39;</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
<p>Note that there is no requirement to have the <tt class="xref py py-class docutils literal"><span class="pre">ModelBackend</span></tt> backend
i.e., you can have the email backend as the only login method. For more
details on how to specify the backends, see the <a class="reference external" href="http://docs.djangoproject.com/en/dev/topics/auth/#specifying-authentication-backends">User authentication in
Django</a>
document.</p>
</li>
</ol>
</div>
<div class="section" id="default-domains">
<h2>Default domains<a class="headerlink" href="#default-domains" title="Permalink to this headline">¶</a></h2>
<p>Emails are given in the form <tt class="docutils literal"><span class="pre">&lt;username&gt;&#64;&lt;domain&gt;</span></tt>. If many of your users
will be logging in with email address with a common domain, you can specify a
set of default domains through the <a class="reference internal" href="settings.html#std:setting-EMAIL_AUTH_DEFAULT_DOMAINS"><tt class="xref std std-setting docutils literal"><span class="pre">EMAIL_AUTH_DEFAULT_DOMAINS</span></tt></a>
setting. If the user enters a username without a domain, the backend will then
try the default domains (in order) to see if one successfully authenticates.</p>
<p>For example, suppose the default domains are:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">EMAIL_AUTH_DEFAULT_DOMAINS</span> <span class="o">=</span> <span class="p">(</span>
    <span class="s">&#39;example.com&#39;</span><span class="p">,</span>
    <span class="s">&#39;mysite.org&#39;</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
<p>If the user enters the username <tt class="docutils literal"><span class="pre">bob</span></tt>, the backend will try to authenticate
them as <tt class="docutils literal"><span class="pre">bob&#64;example.com</span></tt> and then, if that fails, as <tt class="docutils literal"><span class="pre">bob&#64;mysite.org</span></tt>.</p>
</div>
<div class="section" id="multiple-accounts">
<h2>Multiple accounts<a class="headerlink" href="#multiple-accounts" title="Permalink to this headline">¶</a></h2>
<p>If multiple accounts exist for the email address being checked, the backend
will try them in the order they are retrieved from the database. Once an
account is found for which the password matches, the backend will assume that
is the correct user and not check any further accounts.</p>
<p>As the <tt class="xref py py-class docutils literal"><span class="pre">django.contrib.auth.models.User</span></tt> model does not specify a
default order, the order they will be returned in is undefined and hence
unpredictable. If you require them to be tested in a particular order, you
can set the fields to order them by in the <a class="reference internal" href="settings.html#std:setting-EMAIL_AUTH_ORDERING"><tt class="xref std std-setting docutils literal"><span class="pre">EMAIL_AUTH_ORDERING</span></tt></a>
setting. For example, to sort the user by first name and then the date of their
last login:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">EMAIL_AUTH_ORDERING</span> <span class="o">=</span> <span class="p">(</span>
    <span class="s">&#39;first_name&#39;</span><span class="p">,</span>
    <span class="s">&#39;last_login&#39;</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
<p>For more details on specifying ordering in Django, see the <a class="reference external" href="http://docs.djangoproject.com/en/dev/ref/models/querysets/#order-by-fields">QuerySet API
documentation</a>.</p>
</div>
<div class="section" id="custom-forms">
<h2>Custom forms<a class="headerlink" href="#custom-forms" title="Permalink to this headline">¶</a></h2>
<p>The default Django authentication form (<tt class="xref py py-class docutils literal"><span class="pre">django.contrib.auth.forms.AuthenticationForm</span></tt>)
prompts the user for a username and password which is confusing when an email
and password is required. Additionally, the error messages are tailored for the
username-and-password situation, another point of confusion.</p>
<p>To better integrate the backend with your user interface, your login views
should use a form designed to work with an email login. To this end, a suitable
form (<a class="reference internal" href="forms.html#email_auth.forms.AuthenticationForm" title="email_auth.forms.AuthenticationForm"><tt class="xref py py-class docutils literal"><span class="pre">email_auth.forms.AuthenticationForm</span></tt></a>) for use with the backend is
included. For more specialised situations (for example, if you have more than
one backend in use), you will need to create your own forms to suit.</p>
<p>In Django 1.2 and later, the login view provided by the authentication module
(<tt class="xref py py-class docutils literal"><span class="pre">django.contrib.auth.views.login</span></tt>) takes an optional parameter,
<tt class="xref py py-attr docutils literal"><span class="pre">authentication_form</span></tt>, specifying the form to use in the view. This
allows you to customise the form displayed to the user without having to
duplicate the view code. To tell it which form to use, write your URLconf along
the following lines:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">email_auth.forms</span> <span class="kn">import</span> <span class="n">AuthenticationForm</span>

<span class="n">urlpatterns</span> <span class="o">=</span> <span class="n">patterns</span><span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">,</span>
    <span class="o">....</span>
    <span class="p">(</span><span class="s">r&#39;^accounts/login&#39;</span><span class="p">,</span> <span class="s">&#39;django.contrib.auth.views.login&#39;</span><span class="p">,</span>
     <span class="p">{</span><span class="s">&#39;authentication_form&#39;</span><span class="p">:</span> <span class="n">AuthenticationForm</span><span class="p">}),</span>
    <span class="o">....</span>
<span class="p">)</span>
</pre></div>
</div>
<p>See the <a class="reference external" href="http://docs.djangoproject.com/en/dev/topics/auth/">Django authentication documentation</a>
for details of the <tt class="xref py py-class docutils literal"><span class="pre">login</span></tt> view, or the <a class="reference external" href="http://docs.djangoproject.com/en/dev/topics/http/urls/">URL dispatcher</a> documentation for
details on how to write URLconfs.</p>
</div>
</div>


          </div>         
        </div>
      </div>
      
        
          <div class="yui-b" id="sidebar">
            
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Installation</a><ul>
<li><a class="reference internal" href="#basic-installation">Basic installation</a></li>
<li><a class="reference internal" href="#default-domains">Default domains</a></li>
<li><a class="reference internal" href="#multiple-accounts">Multiple accounts</a></li>
<li><a class="reference internal" href="#custom-forms">Custom forms</a></li>
</ul>
</li>
</ul>

  <h3>Browse</h3>
  <ul>
    
      <li>Prev: <a href="obtain.html">Obtaining the code</a></li>
    
    
      <li>Next: <a href="settings.html">Settings</a></li>
    
  </ul>
  <h3>You are here:</h3>
  <ul>
      <li>
        <a href="index.html">django-email-auth v1.0 documentation</a>
        
        <ul><li>Installation</li></ul>
        
      </li>
  </ul>  

  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="sources/install.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" size="18" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
              <h3>Last update:</h3>
              <p class="topless">Sep 24, 2010</p>
          </div> 
        
      
    </div>
    
    <div id="ft">
      <div class="nav">
    &laquo; <a href="obtain.html" title="Obtaining the code">previous</a> 
     |
    <a title="django-email-auth v1.0 documentation" href="index.html" accesskey="U">up</a>
   |
    <a href="settings.html" title="Settings">next</a> &raquo;</div>
    </div>
  </div>

      <div class="clearer"></div>
    </div>
  </body>
</html>